{"version":3,"sources":["Player.js"],"names":["cc","Class","extends","Component","properties","lifePrefab","default","type","Prefab","speed","upSpeed","downSpeed","leftSpeed","rightSpeed","update","dt","node","x","scene","width","y","height","moveAround","moveAroundAnimation","wasDamaged","runAction","blinkAnimation","frontOnSkill","frontBlast","leftOnSkill","leftBlast","rightOnSkill","rightBlast","backOnSkill","backBlast","onLoad","xSpeed","movingState","moveFront","moveBack","moveLeft","moveRight","faceDirection","lifes","Array","heart","parent","getChildByName","onDestroy","systemEvent","off","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","event","keyCode","macro","KEY","a","leftAnimation","d","rightAnimation","w","backAnimation","s","frontAnimation","stopAnimation","r","restartGame","showLifes","animationComponent","getComponent","Animation","animState","play","repeatCount","Infinity","stop","setTimeout","refreshAnimation","bind","console","log","fadeIn","fadeOut","destroy","lose","repeat","sequence","i","life","instantiate","addChild","posX","posY","setPosition","v2","gameStart","on","start"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lifePrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        speed: 0,\r\n        upSpeed: 0,\r\n        downSpeed: 0,\r\n        leftSpeed: 0,\r\n        rightSpeed: 0,\r\n    },\r\n\r\n\r\n    update: function (dt) {\r\n        this.node.x += this.leftSpeed * dt;\r\n        this.node.x += this.rightSpeed * dt;\r\n        if(this.node.x < -this.scene.width/2) this.node.x = -this.scene.width/2;\r\n        if(this.node.x > this.scene.width/2) this.node.x = this.scene.width/2;\r\n        this.node.y += this.upSpeed * dt;\r\n        this.node.y += this.downSpeed * dt;\r\n        if(this.node.y < -this.scene.height/2) this.node.y = -this.scene.height/2;\r\n        if(this.node.y > this.scene.height/2) this.node.y = this.scene.height/2;\r\n\r\n        if(this.moveAround){\r\n            this.moveAroundAnimation();\r\n            this.moveAround = false;\r\n        }\r\n        \r\n        if(this.wasDamaged){\r\n            this.node.runAction(this.blinkAnimation());\r\n            this.wasDamaged = false;\r\n        }\r\n\r\n        if(this.frontOnSkill){\r\n            this.frontBlast();\r\n            this.frontOnSkill = false;\r\n        }\r\n        else if(this.leftOnSkill){\r\n            this.leftBlast();\r\n            this.leftOnSkill = false;\r\n        }\r\n        else if(this.rightOnSkill){\r\n            this.rightBlast();\r\n            this.rightOnSkill = false;\r\n        }\r\n        else if(this.backOnSkill){\r\n            this.backBlast();\r\n            this.backOnSkill = false;\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.xSpeed = 0;\r\n        this.movingState = false;\r\n        this.moveFront = false;\r\n        this.moveBack = false;\r\n        this.moveLeft = false;\r\n        this.moveRight = false;\r\n        this.faceDirection = \"front\";\r\n        this.frontOnSkill = false;\r\n        this.leftOnSkill = false;\r\n        this.rightOnSkill = false;\r\n        this.backOnSkill = false;\r\n        this.wasDamaged = false;\r\n        this.moveAround = false;\r\n        this.lifes = new Array();\r\n        this.heart = 2;\r\n        this.scene = this.node.parent.getChildByName(\"newbg\");\r\n\r\n    },\r\n\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    onKeyDown (event) {\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.leftSpeed = -this.speed;\r\n                this.moveLeft = true;\r\n                if(this.movingState == false){\r\n                    this.movingState = true;\r\n                    this.leftAnimation();\r\n                    this.faceDirection = 'left';\r\n                }\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.rightSpeed = this.speed;\r\n                this.moveRight = true;\r\n                if(this.movingState == false){\r\n                    this.movingState = true;\r\n                    this.rightAnimation();\r\n                    this.faceDirection = 'right';\r\n                }\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.upSpeed = this.speed;\r\n                this.moveBack = true;\r\n                if(this.movingState == false){\r\n                    this.movingState = true;\r\n                    this.backAnimation();\r\n                    this.faceDirection = 'back';\r\n                }\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.downSpeed = -this.speed;\r\n                this.moveFront = true;\r\n                if(this.movingState == false){\r\n                    this.movingState = true;\r\n                    this.frontAnimation();\r\n                    this.faceDirection = 'front';\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp (event) {\r\n        // unset a flag when key released\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.leftSpeed = 0;\r\n                this.moveLeft = false;\r\n                if(this.moveRight){\r\n                    this.rightAnimation();\r\n                    this.faceDirection = 'right';\r\n                }\r\n                else if(this.moveFront){\r\n                    this.frontAnimation();\r\n                    this.faceDirection = 'front';\r\n                }\r\n                else if(this.moveBack){\r\n                    this.backAnimation();\r\n                    this.faceDirection = 'back';\r\n                }\r\n                else if(this.moveLeft){\r\n                    this.leftAnimation();\r\n                    this.faceDirection = 'left';\r\n                }\r\n                else{\r\n                    this.stopAnimation();\r\n                    this.movingState = false;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.rightSpeed = 0;\r\n                this.moveRight = false;\r\n                if(this.moveRight){\r\n                    this.rightAnimation();\r\n                    this.faceDirection = 'right';\r\n                }\r\n                else if(this.moveFront){\r\n                    this.frontAnimation();\r\n                    this.faceDirection = 'front';\r\n                }\r\n                else if(this.moveBack){\r\n                    this.backAnimation();\r\n                    this.faceDirection = 'back';\r\n                }\r\n                else if(this.moveLeft){\r\n                    this.leftAnimation();\r\n                    this.faceDirection = 'left';\r\n                }\r\n                else{\r\n                    this.stopAnimation();\r\n                    this.movingState = false;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.upSpeed = 0;\r\n                this.moveBack = false;\r\n                if(this.moveRight){\r\n                    this.rightAnimation();\r\n                    this.faceDirection = 'right';\r\n                }\r\n                else if(this.moveFront){\r\n                    this.frontAnimation();\r\n                    this.faceDirection = 'front';\r\n                }\r\n                else if(this.moveBack){\r\n                    this.backAnimation();\r\n                    this.faceDirection = 'back';\r\n                }\r\n                else if(this.moveLeft){\r\n                    this.leftAnimation();\r\n                    this.faceDirection = 'left';\r\n                }\r\n                else{\r\n                    this.stopAnimation();\r\n                    this.movingState = false;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.downSpeed = 0;\r\n                this.moveFront = false;\r\n                if(this.moveRight){\r\n                    this.rightAnimation();\r\n                    this.faceDirection = 'right';\r\n                }\r\n                else if(this.moveFront){\r\n                    this.frontAnimation();\r\n                    this.faceDirection = 'front';\r\n                }\r\n                else if(this.moveBack){\r\n                    this.backAnimation();\r\n                    this.faceDirection = 'back';\r\n                }\r\n                else if(this.moveLeft){\r\n                    this.leftAnimation();\r\n                    this.faceDirection = 'left';\r\n                }\r\n                else{\r\n                    this.stopAnimation();\r\n                    this.movingState = false;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.r:\r\n                if(this.heart < 0) this.restartGame();\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    restartGame(){\r\n        this.lifes = new Array();\r\n        this.heart = 2;\r\n        this.showLifes();\r\n    },\r\n\r\n    frontAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('front-move');\r\n        animState.speed = 0.9;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    leftAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('left-move');\r\n        animState.speed = 0.9;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    rightAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('right-move');\r\n        animState.speed = 0.9;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    backAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('back-move');\r\n        animState.speed = 0.9;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    stopAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        animationComponent.stop();\r\n    },\r\n\r\n    frontBlast(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('front-blast');\r\n        animState.speed = 1;\r\n        setTimeout(function () {this.refreshAnimation();}.bind(this), 200);\r\n    },\r\n\r\n    leftBlast(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('left-blast');\r\n        animState.speed = 1;\r\n        setTimeout(function () {this.refreshAnimation();}.bind(this), 200);\r\n    },\r\n\r\n    rightBlast(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('right-blast');\r\n        animState.speed = 1;\r\n        setTimeout(function () {this.refreshAnimation();}.bind(this), 200);\r\n    },\r\n\r\n    backBlast(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('back-blast');\r\n        animState.speed = 1;\r\n        setTimeout(function () {this.refreshAnimation();}.bind(this), 200);\r\n    },\r\n\r\n    blinkAnimation(){\r\n        console.log(\"被打中啦\");\r\n        var fadeIn = cc.fadeIn(0.2);\r\n        var fadeOut = cc.fadeOut(0.2);\r\n        this.lifes[this.heart].destroy();\r\n        this.heart--;\r\n        console.log(this.node.parent.getComponent(\"Game\"));\r\n        if(this.heart < 0){\r\n            this.node.parent.getComponent(\"Game\").lose = true;\r\n            console.log(\"输了\");\r\n        }\r\n        return cc.repeat(cc.sequence(fadeOut,fadeIn),4);\r\n    },\r\n\r\n    showLifes(){\r\n        for(var i = 0 ; i < 3; i++){\r\n            var life = cc.instantiate(this.lifePrefab);\r\n            this.node.parent.addChild(life);\r\n            var posX = this.node.parent.x - this.node.parent.width/2 - 20 + i * 20;\r\n            var posY = this.node.parent.y - 40;\r\n            life.setPosition(cc.v2(posX,posY));\r\n            this.lifes[i] = life;\r\n        }\r\n    },\r\n\r\n    moveAroundAnimation(){\r\n        this.leftSpeed = -80;\r\n        this.leftAnimation();\r\n\r\n        setTimeout(function () {\r\n            this.leftSpeed = 0;\r\n            this.stopAnimation();\r\n        }.bind(this), 1000);\r\n\r\n        setTimeout(function () {\r\n            this.rightSpeed = 80;\r\n            this.rightAnimation();\r\n        }.bind(this), 2000);\r\n\r\n        setTimeout(function () {\r\n            this.rightSpeed = 0;\r\n            this.stopAnimation();\r\n        }.bind(this), 3000);\r\n\r\n        setTimeout(function () {\r\n            this.upSpeed = 80;\r\n            this.backAnimation();\r\n        }.bind(this), 4000);\r\n\r\n        setTimeout(function () {\r\n            this.upSpeed = 0;\r\n            this.stopAnimation();\r\n        }.bind(this), 5000);\r\n\r\n        setTimeout(function () {\r\n            this.downSpeed = -80;\r\n            this.frontAnimation();\r\n        }.bind(this), 6000);\r\n\r\n        setTimeout(function () {\r\n            this.downSpeed = 0;\r\n            this.stopAnimation();\r\n            this.gameStart();\r\n            this.showLifes();\r\n        }.bind(this), 7000);\r\n\r\n    },\r\n\r\n    refreshAnimation(){\r\n        if(this.movingState){\r\n            if(this.moveRight){\r\n                this.rightAnimation();\r\n                this.faceDirection = 'right';\r\n            }\r\n            else if(this.moveFront){\r\n                this.frontAnimation();\r\n                this.faceDirection = 'front';\r\n            }\r\n            else if(this.moveBack){\r\n                this.backAnimation();\r\n                this.faceDirection = 'back';\r\n            }\r\n            else if(this.moveLeft){\r\n                this.leftAnimation();\r\n                this.faceDirection = 'left';\r\n            }\r\n        }\r\n    },\r\n\r\n    gameStart(){\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);  \r\n    },\r\n\r\n    // fireBlast() {\r\n    //     var scene = cc.director.getScene();\r\n    //     var loc = this.node.getPosition();\r\n    //     var blast = cc.instantiate(this.blast);\r\n    //     bullet.position = touchLoc;\r\n    //     bullet.active = true;\r\n    //     scene.addChild(bullet);\r\n    // },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n});\r\n"]}