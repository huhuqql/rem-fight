{"version":3,"sources":["GuideCat.js"],"names":["cc","Class","extends","Component","properties","bombPrefab","default","type","Prefab","catAudio","AudioClip","speed","upSpeed","downSpeed","leftSpeed","rightSpeed","leftAnimation","animationComponent","getComponent","Animation","animState","play","repeatCount","Infinity","rightAnimation","disappearAnimation","fadeOut","moveLeft","xSpeed","stopMoving","ySpeed","stop","onLoad","console","log","timer","timeInterval","audioTimer","playCatSound","setTimeout","bind","start","dropBomb","bomb","instantiate","node","parent","addChild","setPosition","getPosition","findMonster","monster","getChildByName","moveToPosition","x","y","moveToRandomPosition","randX","Math","random","width","randY","height","mX","mY","audioEngine","update","dt","scene"],"mappings":"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","file":"GuideCat.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        bombPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        catAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n\r\n        speed: 0,\r\n        upSpeed: 0,\r\n        downSpeed: 0,\r\n        leftSpeed: 0,\r\n        rightSpeed: 0,\r\n    },\r\n\r\n    leftAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('cat-left-move');\r\n        animState.speed = 0.7;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    rightAnimation(){\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        var animState = animationComponent.play('cat-right-move');\r\n        animState.speed = 0.7;\r\n        animState.repeatCount = Infinity;\r\n    },\r\n\r\n    disappearAnimation(){\r\n        var fadeOut = cc.fadeOut(1);\r\n        return fadeOut;\r\n    },\r\n\r\n    moveLeft(){\r\n        this.xSpeed = -this.speed;\r\n        this.leftAnimation();\r\n    },\r\n\r\n    stopMoving(){\r\n        this.xSpeed = 0;\r\n        this.ySpeed = 0;\r\n        var animationComponent = this.getComponent(cc.Animation);\r\n        animationComponent.stop();\r\n    },\r\n\r\n    // moveRight(){\r\n    //     this.rightSpeed = -this.speed;\r\n    //     this.rightAnimation();\r\n    // },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        console.log(\"猫猫出现\");\r\n        this.timer = 0;\r\n        this.xSpeed = 0;\r\n        this.ySpeed = 0;\r\n        this.timeInterval = 9999;\r\n        this.audioTimer = 15;\r\n\r\n        this.moveLeft();\r\n        this.playCatSound();\r\n        setTimeout(function () {\r\n            this.stopMoving();\r\n        }.bind(this), 3000);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    dropBomb(){\r\n        var bomb = cc.instantiate(this.bombPrefab);\r\n        this.node.parent.addChild(bomb);\r\n        bomb.setPosition(this.node.getPosition()); \r\n    },\r\n\r\n    findMonster(){\r\n        var monster = this.node.parent.getChildByName(\"hulk-1\");\r\n        if(monster != null){\r\n            this.moveToPosition(monster.x, monster.y);\r\n        }\r\n        else{\r\n            this.moveToRandomPosition();\r\n        }\r\n    },\r\n\r\n    moveToRandomPosition(){\r\n        var randX = (Math.random() - 0.5) * 2 * (this.node.parent.getChildByName(\"newbg\").width / 2 - 50);\r\n        var randY = (Math.random() - 0.5) * 2 * (this.node.parent.getChildByName(\"newbg\").height / 2 - 50);\r\n\r\n        this.moveToPosition(randX, randY);\r\n\r\n    },\r\n\r\n    moveToPosition(mX, mY){\r\n        this.xSpeed = mX - this.node.x;\r\n        this.ySpeed = mY - this.node.y;\r\n\r\n        // var xSpeedSign = 1;\r\n        // var ySpeedSign = 1;\r\n        // if (this.xSpeed < 0) xSpeedSign = -1;\r\n        // if (this.ySpeed < 0) ySpeedSign = -1;\r\n\r\n        this.xSpeed = this.xSpeed/2;\r\n        this.ySpeed = this.ySpeed/2;\r\n\r\n        if(this.xSpeed < 0) this.leftAnimation();\r\n        else this.rightAnimation();\r\n\r\n        // if (Math.abs(this.xSpeed) < Math.abs(this.ySpeed)) {\r\n        //     this.xSpeed = this.xSpeed * Math.abs(maxSpeed / this.ySpeed);\r\n        //     this.ySpeed = ySpeedSign * maxSpeed;\r\n        // }\r\n        // else {\r\n        //     this.ySpeed = this.ySpeed * Math.abs(maxSpeed / this.xSpeed);\r\n        //     this.xSpeed = xSpeedSign * maxSpeed;\r\n        // }\r\n\r\n        setTimeout(function () {\r\n            this.stopMoving();\r\n        }.bind(this), 2000);\r\n\r\n    },\r\n\r\n    playCatSound(){\r\n        cc.audioEngine.play(this.catAudio, false, 0.3);\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.timer >= this.timeInterval){\r\n            this.timer = 0;\r\n            this.findMonster();\r\n            setTimeout(function () {\r\n                this.dropBomb();\r\n            }.bind(this), 3000);\r\n        }\r\n\r\n        if(this.audioTimer <= 0){\r\n            console.log(\"猫叫\");\r\n            this.playCatSound();\r\n            this.audioTimer = 15;\r\n        }\r\n\r\n        this.timer += dt;\r\n        this.audioTimer -= dt;\r\n\r\n        var scene = this.node.parent;\r\n        \r\n        this.node.x += this.xSpeed * dt;\r\n        this.node.y += this.ySpeed * dt;\r\n        // if(this.node.x < -scene.width/2) this.node.x = -scene.width/2;\r\n        // if(this.node.x > scene.width/2) this.node.x = scene.width/2;\r\n        // this.node.y += this.upSpeed * dt;\r\n        // this.node.y += this.downSpeed * dt;\r\n        // if(this.node.y < -scene.height/2) this.node.y = -scene.height/2;\r\n        // if(this.node.y > scene.height/2) this.node.y = scene.height/2;\r\n    },\r\n});\r\n"]}